---
title: C++学习3 表达式、语句和函数拾遗
tags: 梁子20163933
grammar_cjkRuby: true
---
> 本笔记并非对知识点的梳理，只是建立在回顾基础上上的重申和查缺补漏。

# 表达式
表达式由一个或多个运算对象构成，对表达式求值可得到结果。字面值（常量）和变量是最简单的对象。可以运用运算发将运算对象进行组合得到更为复杂的表达式。
## 运算符
包括一元运算符和二元运算符。
### 重载运算符
C++语言定义了内置类型和复合类型的运算符操作，但是对于用户自定义的类并没有定义运算符，因而用户可以对运算符进行自己的定义，这种定义得到的运算符被称为**重载运算符（overloaded operator）**。
### 左值和右值
C++的表达式为左值（lvalue）或右值（rvalue）中的一种。
在C++中，当一个对象被用作右值的时候，用的是对象的值（内容）；当一个对象被用作左值时，使用的是对象的身份（在内存中的位置）。
常见的运算符中用到左值的场景包括：
1. 赋值运算符。左侧和右侧的数值均为左值。
2. 取地址符（&），作用于一个左值对象，返回一个指向该左值对象的指针，这个指针是一个右值。
3. 内置解引用运算符、下标运算符、迭代器解引用运算符等等。
4. 内置类型和迭代器的递增递减运算符。
### 优先级和结合律
略
### 求值顺序
略
### 算术运算符
略
### 逻辑和关系运算符
略
### 成员访问运算符
点运算符和箭头运算符都可用于访问成员。点运算符用于获取类对象中的一个成员，箭头运算符与点运算符有关，即ptr->mem==(\*ptr).mem。
箭头运算符作用于一个指针类型的运算对象（确切地说，是一个指向类对象的指针），其结果是一个左值。
### 条件运算符
这个内容在C中是学习过的，在这里进行简单地复习。
所谓的条件运算符，就是将if else语句简化到单个表达式之中，格式如下：

**cond? expr1:expr2;**

其中cond是执行的条件判断，当其为真时，执行表达式1（expr1），否则执行表达式2（expr2）.
```c++
int grade=95;
string final_grade=(grade>=60)?"pass":"gua_ke";
```
#### 嵌套的条件预算符
正如if_else if语句一样，C++支持条件运算符嵌套使用。
```c++
final_grade=(grade<60)? "gua_ke"
										:(grade>=90) ? "high"
										:pass;
```
### 位运算符
这个在C语言单片机等中使用的较多，C++中使用并不频繁。略。
### sizeof运算符
sizeof运算符首先是一个运算符！不是一个函数！它可以返回一条表达式或者一个类型名字所占的字节数。
```c++
int data，*p;
sizeof (int);  //返回一个整形数据所占的字节数；
sizeof data;  //与上面一样
sizeof p;       //返回一个指向整形数据的指针所占的空间大小
sizeof *p;       //返回指针所指空间类型的内存大小
```
### 逗号运算符
表达式的结果是最右边的表达式的结果
### 类型转换
包括**隐式**类型转换和**显式**类型转换。
显式转换也称强制转换（**cast**）。
#### static_cast
任何具有明确定义的类型转换，只要不包括底层const，都可以使用static_cast.
```c++
int i,j;
double slope= static_cast<double>(i)/j;
```
#### const_cast
const_cast**只能**改变运算对象的底层const。
```c++
const char *p;
char *p=const_char<char>(p);
//可以用这种强制转换来去掉常变量的恒定属性。
```
#### reinterpret_cast
reinterpret_cast通常为运算对象的位模式提供较低层次上的重新解释。
这个不介绍了，因为易出错。且不同机器的支持程度不同。
### 运算符优先级表
见147页。
# 语句
简单的部分、之前学过的部分全部省略。这里只介绍try语句块和异常处理部分。

